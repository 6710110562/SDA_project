<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Plant Statistics</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body{
      font-family: Arial, sans-serif;
      text-align:center;
      background:#f5f5f5;
    }

    h1{
      margin-top:20px;
    }

    .box{
      width:90%;
      max-width:600px;
      margin:auto;
      background:white;
      padding:20px;
      border-radius:10px;
      box-shadow:0 0 10px rgba(0,0,0,0.1);
    }

    button{
      margin-top:15px;
      padding:8px 15px;
      border:none;
      background:#4CAF50;
      color:white;
      border-radius:5px;
      cursor:pointer;
    }
  </style>
</head>

<body>

<h1>ðŸŒ± Plant Result Statistics</h1>

<div class="box">
  <canvas id="myChart"></canvas>

  <br>
  <button onclick="location.href='index.html'">HOME</button>
</div>


<script>

let chart;

async function loadData(){

  const res = await fetch("http://localhost:3000/api/stats");
  const data = await res.json();

  const labels = Object.keys(data);
  const values = Object.values(data);

  if(chart){
    chart.destroy();
  }

  const ctx = document.getElementById("myChart");

  chart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: labels,
      datasets: [{
        label: "Number of users",
        data: values,
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          ticks:{
            stepSize:1
          }
        }
      }
    }
  });
}

loadData();

</script>

</body>
</html>
